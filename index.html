<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tic Tac Toe PvP - SOL Betting (Devnet)</title>
  <link rel="stylesheet" href="styles.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
</head>
<body>
  <div class="container">
    <header>
      <h1>Tic Tac Toe PvP</h1>
      <p class="subtitle">Host → Share Link → Joiner connects Phantom → Winner gets the pot</p>
    </header>

    <div class="game-section">
      <div class="game-board">
        <div id="status" class="status">Host creates game to start</div>
        <div id="board" class="board">
          <div class="cell" data-cell></div>
          <div class="cell" data-cell></div>
          <div class="cell" data-cell></div>
          <div class="cell" data-cell></div>
          <div class="cell" data-cell></div>
          <div class="cell" data-cell></div>
          <div class="cell" data-cell></div>
          <div class="cell" data-cell></div>
          <div class="cell" data-cell></div>
        </div>
      </div>

      <div class="betting-panel">
        <h3>Game Setup</h3>
        <div class="bet-input">
          <input id="gameValue" type="number" placeholder="2.0" step="0.1" min="0.2" />
          <span class="currency">SOL</span>
        </div>
        <button id="createGame" class="btn btn-primary">Create Game & Generate Link</button>
        <input id="gameLink" type="text" readonly style="margin-top:8px;" />

        <div class="current-bet">
          <div>Each Player: <strong id="eachBet">0 SOL</strong></div>
          <div>Total Pot: <strong id="potDisplay">0 SOL</strong></div>
        </div>
      </div>

      <div class="wallet-panel">
        <h3>Wallets</h3>
        <div class="wallet-info">
          <div><strong>Host (X):</strong> <span id="walletX">Not Connected</span></div>
          <div><strong>Joiner (O):</strong> <span id="walletO">Not Connected</span></div>
        </div>

        <div style="display:grid; gap:8px; margin-top:12px">
          <button id="connectO" class="btn btn-outline">Connect Phantom (Joiner)</button>
        </div>

        <div class="wallet-status" id="walletStatus" style="margin-top:12px">
          <span>Network: Devnet</span>
        </div>

        <button id="startGame" class="btn btn-primary" disabled style="margin-top:12px">Start Game</button>
      </div>
    </div>

    <div class="game-rules">
      <h3>Rules</h3>
      <ul>
        <li>Host creates a game and shares the link.</li>
        <li>Joiner opens link, connects Phantom.</li>
        <li>Winner receives the game value in SOL.</li>
        <li>Runs on <b>Solana Devnet</b> — use a faucet.</li>
      </ul>
    </div>
  </div>

  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
    import { getDatabase, ref, set, onValue, update } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyB8Oi8VoepZvTOfEJ_NnTYDnH4i6nx1qsg",
      authDomain: "tictactoepvp-ccd56.firebaseapp.com",
      projectId: "tictactoepvp-ccd56",
      storageBucket: "tictactoepvp-ccd56.firebasestorage.app",
      messagingSenderId: "136034799077",
      appId: "1:136034799077:web:8812bcf82ba1915701f30c"
    };

    const app = initializeApp(firebaseConfig);
    window.db = getDatabase(app);
  </script>

  <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
  <script type="module" src="script.js"></script>
</body>
</html>